<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
</head>
<body>
  <h1>I am the dashboard</h1>

  <!-- Filtered section  -->
  <% customers.forEach((user, index) => { %>
    <% if (user.firstname === "Olanrewaju") { %>
      <i><%= index + 1 %></i>
      <i><%= user.firstname %> <%= user.lastname %></i>
      <i><%= user.email %></i>
    <% } %>
  <% }) %>

  <hr>

  <!-- All Users -->
  <% customers.forEach((user, index) => { %>
    <div style="margin-bottom: 1rem;">
      <p><strong><%= index + 1 %>.</strong> <%= user.firstname %> <%= user.lastname %> â€” <%= user.email %></p>

      <!-- Delete Form -->
      <form action="/delete/<%= index %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this user?');" style="display:inline;">
        <button type="submit">Delete</button>
      </form>

      <!-- Toggle Edit Form -->
      <button type="button" onclick="toggleForm('<%= index %>')">Edit</button>

      <form id="editForm<%= index %>" action="/update/<%= index %>" method="POST" style="display:none; margin-top:10px;">
        <input type="text" name="firstname" value="<%= user.firstname %>" required>
        <input type="text" name="lastname" value="<%= user.lastname %>" required>
        <input type="email" name="email" value="<%= user.email %>" required>
        <button type="submit">Save</button>
      </form>
    </div>
    <hr>
  <% }) %>

  <script>
    function toggleForm(index) {
      const form = document.getElementById(`editForm${index}`);
      form.style.display = form.style.display === 'none' ? 'block' : 'none';
    }
  </script>
</body>
</html>
